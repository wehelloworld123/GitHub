<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.pollix.at/thymeleaf/shiro">
<head th:replace="admin/common/html/tableHead :: tableHead(~{::title},~{::link},~{::style})">

<title th:text=${title}></title>
<!-- 这儿引用单独的css link -->
<!-- Ladda for Bootstrap 3按钮加载进度插件 -->
<link rel="stylesheet" th:href="@{/static/admin/assets/js/button/ladda/ladda.min.css}">
<!-- bootstrap-table表单样式 -->
<link th:href="@{/static/admin/assets/js/bootstrap/css/bootstrap-table/bootstrap-table.min.css}" rel="stylesheet"/>

<!-- 用户界面自定义css -->
<link th:href="@{/static/admin/user/css/user-add.css}" rel="stylesheet"/>
<style type="text/css"></style>

</head>

<body>
      	   	      	      	      	      	      	      	      	      	      	      	      	      	      	      	      	      	      	      	      	      
<div class="content-wrap">
	<div class="row">
		<div class="col-sm-12">
			<div class="nest" id="elementClose">
				<div class="">
				</div>
				<div class="body-nest" id="element">
					<div class="panel-body">
						<form  class="form-horizontal m" id="form-edit" th:object="${ProContent}">

							<input id="id" name="id" type="hidden" th:field="*{no}"/>
							<input id="charpId" name="charpId" type="hidden" th:field="*{charpId}"/>
							<div class="form-group">
								<!--<label class="col-sm-3 control-label ">标题：</label>-->
								<div class="col-sm-8">
									<span class="" type="text" id="title" name="title" th:text="*{title}"/>
								</div>
							</div>

							<div class="panel panel-default">
								<!--				<div class="panel-fb instagram-color">
                                            <a class="link-post pull-right" href="#">
                                                <span class="entypo-cog"></span>
                                            </a>
                                            <a class="link-post pull-right" href="#">
                                                <span class="entypo-heart"></span>
                                            </a>
                                            <a class="link-post pull-right" href="#">
                                                <span class="entypo-link"></span>
                                            </a>

                                            <h4>
                                                <span class="entypo-instagrem "></span>&nbsp;

                                            </h4>
                                        </div>-->


								<div class="panel-body">
									<p class="lead">
										<span th:text="*{title}"></span>
									</p>
									<div>
										<span style="white-space:pre-line" th:text="*{content}"></span>
									</div>
									<div class="social-header">
										<a href="#" class="insta-color">
											<span class="entypo-heart" th:text="*{likes}"></span>
										</a>喜欢
										<a href="#" class="insta-color">
											<span class="entypo entypo-thumbs-up" th:text="*{recomNo}"></span>
										</a>推荐
									</div>
									</p>
									<hr>
									<div class="social-content">

										<ul>
											<li>
												<img class="img-social-content img-circle pull-left" src="../../../api.randomuser.me/portraits/thumb/women/45.jpg">
												<span><a href="#" class="insta-color">Gifta Gina</a> Keren ini dmn ya?
														<br>
													<!--<b>43 Minute</b>-->
													</span>

											</li>
											<hr>
											<li>
												<img class="img-social-content img-circle pull-left" src="../../../api.randomuser.me/portraits/thumb/women/45.jpg">
												<span><a href="#" class="insta-color">Gifta Gina</a>收到高更准备前往阿尔的消息，梵高很高兴。同年8月，他画了第一幅《向日葵》。他原本想画12幅向日葵来装点他在阿尔租住的小屋，以迎接高更的到来，但刚画完4幅高更就来了，并给梵高带来了新颜料和一种黄麻质材的画布。高更对梵高的这种金黄色的组合十分喜爱，对已挂在小屋的《向日葵》给予了高度评价。在高更的鼓动下，1888年10月，梵高用高更带来的黄麻又画了第5幅向日葵。但是不久，两位艺术家因艺术理念上的差异发生了剧烈的冲突，情绪过激的梵高，用剃须刀割下了自己的耳朵 [6]  。高更在惊恐中离开了阿尔，离开了梵高。他在这里只住了两个月，这个时间，对一心盼着他到来的梵高来说，是短暂的。
														<br>
													<!--<b>43 Minute</b>-->
													</span>

											</li>
											<hr>
										</ul>


									</div>

									<!--<div class="social-content">

										<ul>
											<li>
												<img class="img-social-content img-circle pull-left" src="../../../api.randomuser.me/portraits/thumb/women/45.jpg">
												<span><a href="#" class="insta-color">Gifta Gina</a>收到高更准备前往阿尔的消息，梵高很高兴。同年8月，他画了第一幅《向日葵》。他原本想画12幅向日葵来装点他在阿尔租住的小屋，以迎接高更的到来，但刚画完4幅高更就来了，并给梵高带来了新颜料和一种黄麻质材的画布。高更对梵高的这种金黄色的组合十分喜爱，对已挂在小屋的《向日葵》给予了高度评价。在高更的鼓动下，1888年10月，梵高用高更带来的黄麻又画了第5幅向日葵。但是不久，两位艺术家因艺术理念上的差异发生了剧烈的冲突，情绪过激的梵高，用剃须刀割下了自己的耳朵 [6]  。高更在惊恐中离开了阿尔，离开了梵高。他在这里只住了两个月，这个时间，对一心盼着他到来的梵高来说，是短暂的。
														<br>
													&lt;!&ndash;<b>43 Minute</b>&ndash;&gt;
													</span>

											</li>

										</ul>


									</div>
									<hr>-->
									<!--<form>
										<div class="input-group">
											<div class="input-group-btn">
												<button class="btn">+1</button>
												<button class="btn"><i class="glyphicon glyphicon-share"></i>
												</button>
											</div>
											<input type="text" placeholder="Add a comment.." class="form-control">
										</div>
									</form>-->

									<div class="container">
										<ul class="pager">
											<li><a href="javascript:queryComments(0)">&laquo;上一页</a></li>
											<li><a href="javascript:queryComments(1)">下一页&raquo;</a></li>
										</ul>
									</div>
									<br>
									<br>


								</div>
							</div>
							<!--<input id="id" name="id" type="hidden" th:field="*{no}"/>
						
									<div class="form-group">
										<label class="col-sm-3 control-label ">标题：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="title" name="title" th:value="*{title}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">简述：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="summary" name="summary" th:value="*{summary}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">内容：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="content" name="content" th:value="*{content}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">图片：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="pic" name="pic" th:value="*{pic}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">章节编号：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="charpId" name="charpId" th:value="*{charpId}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">章节名称：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="charpName" name="charpName" th:value="*{charpName}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">小节名称：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="secName" name="secName" th:value="*{secName}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">书籍编号：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="bookId" name="bookId" th:value="*{bookId}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">书籍名称：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="bookName" name="bookName" th:value="*{bookName}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">点赞：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="likes" name="likes" th:value="*{likes}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">推荐：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="recomNo" name="recomNo" th:value="*{recomNo}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">展示：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="views" name="views" th:value="*{views}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">采纳：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="adopt" name="adopt" th:value="*{adopt}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">点赞人：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="favorer" name="favorer" th:value="*{favorer}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">创建人：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="creator" name="creator" th:value="*{creator}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">创建人Id：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="createBy" name="createBy" th:value="*{createBy}"/>
										</div>
									</div>

								
									<div class="form-group">
										<label class="col-sm-3 control-label ">创建时间：</label>
										<div class="col-sm-8">
											<input class="form-control MyDate" type="text" id="createDat" name="createDat" th:value="*{#dates.format(createDat,'yyyy-MM-dd HH:mm:ss')}"/>
										</div>
									</div>
									
								
									<div class="form-group">
										<label class="col-sm-3 control-label ">更新时间：</label>
										<div class="col-sm-8">
											<input class="form-control MyDate" type="text" id="lUpdateDat" name="lUpdateDat" th:value="*{#dates.format(lUpdateDat,'yyyy-MM-dd HH:mm:ss')}"/>
										</div>
									</div>
									
								
									<div class="form-group">
										<label class="col-sm-3 control-label ">删除：</label>
										<div class="col-sm-8">
											<input class="form-control" type="text" id="isDel" name="isDel" th:value="*{isDel}"/>
										</div>
									</div>-->

			
									<div class="form-group">
										<div class="form-control-static col-sm-offset-9">
											<button type="submit" class="btn btn-primary">采纳</button>
											<button onclick="$.modal.close()" class="btn btn-danger" type="button">关闭</button>
										</div>
									</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- 通用js -->
<div th:include="admin/common/html/js :: onload_js">
   
</div>
<!-- bootstarp 表格 -->
<script th:src="@{/static/admin/assets/js/bootstrap/js/bootstrap-table/bootstrap-table.min.js}" type="text/javascript"></script>
<script th:src="@{/static/admin/assets/js/bootstrap/js/bootstrap-table/locale/bootstrap-table-zh-CN.min.js}" type="text/javascript"></script>
<script th:src="@{/static/admin/assets/js/bootstrap/js/base_list.js}" type="text/javascript"></script>


<!-- 弹窗 -->
<script th:src="@{/static/admin/assets/js/layer/layer.js}" type="text/javascript"></script>
<!-- 遮罩层 -->
<script th:src="@{/static/admin/assets/js/blockUI/jquery.blockUI.js}" type="text/javascript"></script>
<script type="text/javascript">
var dataUrl=window.rootPath+"/ProRecomController/queryRecom";
var paramData={
	startIndex:0,
	pageSize:10,
	no:"[[${ProContent.no}]]"
}
var noData = false;
var noFlash = false;
var dataList=[];
$(function(){
	 $(".MyDate").datetimepicker({
		 	format: "yyyy-mm-dd hh:00:00",
	        startDate: new Date(),
	        autoclose: true,
	        todayBtn: true,
	        language: 'zh-CN',
	        initialDate:new Date(),
	        minView: 1      
	    });
	
})

$(function(){
    queryComments(1);
});
$("#form-edit").validate({
	submitHandler : function(form) {
		edit();
	}
});

function queryComments(type) {
    if(type==0){//上一页
        if(paramData.startIndex>=10) {
            paramData.startIndex -= paramData.pageSize;
        }else{
            rturn;
        }
        $("#comments").find("li").remove();
        var html = "";
        for(var i=paramData.startIndex-paramData.pageSize;i<dataList.length;i++){
            html = "<li>\n"+
                "<img class=\"img-social-content img-circle pull-left\" style=\"height: 25px;width: 25px;margin-right: 10px;\" src=\""+dataList[i].createAvat+"\">\n"+
                "<span><a href=\"#\" class=\"insta-color\">"+dataList[i].creator+"</a> "+dataList[i].content+""+
                "<br>\n"+
                "<b>"+dataList[i].createDat+"</b>\n"+
                "</span>\n"+
                "<li>\n"+
                "<hr>";
            $("#comments").append(html);
        }
    }else{//下一页

        if(paramData.startIndex<dataList.length){

            $("#comments").find("li").remove();
            var html = "";
            for(var i=paramData.startIndex;i<dataList.length;i++){
                html = "<li>\n"+
                    "<img class=\"img-social-content img-circle pull-left\" style=\"height: 25px;width: 25px;margin-right: 10px;\" src=\""+dataList[i].createAvat+"\">\n"+
                    "<span><a href=\"#\" class=\"insta-color\">"+dataList[i].creator+"</a> "+dataList[i].content+""+
                    "<br>\n"+
                    "<b>"+dataList[i].createDat+"</b>\n"+
                    "</span>\n"+
                    "<li>\n"+
                    "<hr>";
                $("#comments").append(html);
            }
            paramData.startIndex += paramData.pageSize;
        }else{
            if(noFlash){
                $.modal.alertError("没有更多了");
                return;
            }
            $.ajax({
                cache : true,
                type : "GET",
                url : dataUrl,
                data : paramData,
                async : false,
                error : function(request) {
                    console.info(request);
                    $.modal.alertError("系统错误");
                },
                success : function(data) {
                    if(data.status==200){
                        if(data.data.length>0) {
                            dataList = dataList.concat(data.data);
                            $("#comments").find("li").remove();
                            var html = "";
                            for(var i=paramData.startIndex;i<dataList.length;i++){
                                html = "<li>\n"+
                                    "<img class=\"img-social-content img-circle pull-left\" style=\"height: 25px;width: 25px;margin-right: 10px;\" src=\""+dataList[i].createAvat+"\">\n"+
                                    "<span><a href=\"#\" class=\"insta-color\">"+dataList[i].creator+"</a> "+dataList[i].content+""+
                                    "<br>\n"+
                                    "<b>"+dataList[i].createDat+"</b>\n"+
                                    "</span>\n"+
                                    "<li>\n"+
                                    "<hr>";
                                $("#comments").append(html);
                            }
                            paramData.startIndex += paramData.pageSize;
                        }
                        if(data.data.length<paramData.pageSize){
                            noFlash = true;
                        }
                    }
                }
            });
        }
    }

}

function edit() {
	var dataFormJson = $("#form-edit").serialize();
	$.ajax({
		cache : true,
		type : "POST",
		url : rootPath + "/ProContentController/edit",
		data : dataFormJson,
		async : false,
		error : function(request) {
			$.modal.alertError("系统错误");
		},
		success : function(data) {
			$.operate.saveSuccess(data);
		}
	});
}
</script>

</body>


</html>
